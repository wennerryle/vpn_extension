/*! wSelect - v1.2.1 - 2014-04-08 */!function(e){function t(t,n){this.$el=e(t),this.id=Math.random(),this.options=n,this.multiple=this.$el.prop("multiple"),this.activeOpt=null,this.widthSet=!1,this.generate()}function n(t,n){this.$el=e(t),this.wSelect=n}t.prototype={generate:function(){if(!this.$select){var n,t=this;this.$select=e('<div class="wSelect"><div class="wSelect-arrow"></div></div>'),this.$optionsHolder=e('<div class="wSelect-options-holder"></div>'),this.$options=e('<div class="wSelect-options"></div>'),e.support.placeholder||this.$select.css("zIndex",100-this.$el.index()),n=function(n){n.stopPropagation(),e("select").each(function(){var n=e(this).data("wSelect");n&&n.id!==t.id&&(n.multiple||n.$optionsHolder.hide(),n.onBlur())}),t.multiple||t.onClick(n),t.$el.focus()},this.multiple?(this.$select.addClass("wSelect-multiple"),this.$optionsHolder.click(n)):(this.$selected=e('<div class="wSelect-selected"></div>'),this.$select.append(this.$selected),this.$select.click(n),this.$optionsHolder.click(function(e){e.stopPropagation(),t.$el.focus()})),this.$select.hover(function(){t.onFocus("hover")},function(){t.onBlur("hover")}),this.$el.addClass("wSelect-el").change(function(){t.change()}).focus(function(){t.onFocus()}).keydown(function(e){t.keydown(e)}).keyup(function(e){t.keyup(e)}),e(document).click(function(){t.multiple||t.$optionsHolder.hide(),t.onBlur()}),this.widthSet=this.$select.width()>0,this.setTheme(this.options.theme),this.setSize(this.options.size),this.reset(),this.$optionsHolder.append(this.$options),this.$select.append(this.$optionsHolder),this.$el.after(this.$select)}return this.$select},reset:function(){var t=this;this.$options.children().remove(),this.$el.children().each(function(){var s=new n(this,t);e.data(this,"wSelect-option",s),t.$options.append(s.generate())}),this.$options.children().removeClass("wSelect-option-last").last().addClass("wSelect-option-last"),this.setSize(this.options.size)},change:function(){this.$options.children().removeClass("wSelect-option-selected wSelect-option-active"),this.$el.children(":selected").each(function(){e(this).data("wSelect-option").select()})},keydown:function(e){9===e.keyCode&&(this.$optionsHolder.hide(),this.onBlur())},keyup:function(e){if(13===e.keyCode)this.$optionsHolder.hide();else if(e.keyCode>=37&&e.keyCode<=40){this.change();var s=this.$options.find(".wSelect-option-selected:last"),n=this.$options.scrollTop(),t=s.position().top+n,o=this.$options.height(),i=s.outerHeight(!0);0>t-n?this.$options.scrollTop(t):t+i-n>o&&this.$options.scrollTop(t-o+i)}},onClick:function(){if(!this.$optionsHolder.is(":visible")){var n=this.$select.offset().top-e(window).scrollTop(),t=this.$optionsHolder.outerHeight(),o=n-t,s=e(window).height()-(n+this.$select.outerHeight()+t+5),i=s>0||s>o?this.$select.height():-t;this.$optionsHolder.css("top",i)}this.$optionsHolder.toggle()},onFocus:function(e){e=e||"active",this.options.highlight&&this.$select.addClass("wSelect-"+e)},onBlur:function(e){e=e||"active",this.options.highlight&&this.$select.removeClass("wSelect-"+e)},setTheme:function(e){this.$select.attr("class",this.$select.attr("class").replace(/wSelect-theme-.+\s|wSelect-theme-.+$/,"")),this.$select.addClass("wSelect-theme-"+e)},setSize:function(t){var s,n=this.$options.children(":first").clone().css({position:"absolute",left:-1e4}),o=this.$el.children().length;e("body").append(n),s=n.outerHeight(!0),n.remove(),!this.multiple&&t>o&&(t=o),this.$options.height(s*t-1)}},n.prototype={generate:function(){var t,n=this;return this.$option||(t=this.$el.attr("data-icon"),this.$option=e('<div class="wSelect-option"></div>'),this.$value=e('<div class="wSelect-option-value"></div>'),this.$option.append(this.$value),"string"==typeof t&&(this.$value.addClass("wSelect-option-icon"),this.$value.css("backgroundImage","url("+t+")"))),this.$el.prop("selected")&&this.select(),this.$el.prop("disabled")?this.$option.addClass("wSelect-option-disabled"):(this.$option.removeClass("wSelect-option-disabled"),this.$option.unbind("click").click(function(e){n.onClick(e)})),this.$value.html(this.$el.html()),this.setWidth(),this.$option},select:function(){if(this.wSelect.activeOpt||(this.wSelect.activeOpt=this),!this.wSelect.multiple){var e=this.$el.attr("data-icon");"string"==typeof e?(this.wSelect.$selected.addClass("wSelect-option-icon"),this.wSelect.$selected.css("backgroundImage","url("+e+")")):(this.wSelect.$selected.removeClass("wSelect-option-icon"),this.wSelect.$selected.css("backgroundImage","")),this.wSelect.$selected.html(this.$el.html())}this.$option.addClass("wSelect-option-selected")},onClick:function(t){if(n=null,this.wSelect.multiple&&(t.ctrlKey||t.shiftKey)){if(t.ctrlKey||!this.wSelect.activeOpt)n=this.wSelect.$el.val()||[],d=this.$el.val(),o=e.inArray(d,n),-1===o?(n.push(this.$el.val()),this.wSelect.activeOpt=this):n.splice(o,1);else if(t.shiftKey){var n,s,o,d,i=this.wSelect.activeOpt.$el.index(),a=this.$el.index(),r=0,c=0,l=null;a>i?(r=i,c=a):(r=a,c=i),n=[];for(s=r;c>=s;s++)l=this.wSelect.$el.children(":eq("+s+")"),l.is(":not(:disabled)")&&n.push(l.val())}}else n=this.$el.val(),this.wSelect.$optionsHolder.hide(),this.wSelect.activeOpt=this;this.wSelect.$el.val(n).change()},setWidth:function(){if(this.wSelect.multiple||this.wSelect.widthSet)return!0;this.$option.hide().appendTo("body");var e=this.$option.width();e>this.wSelect.$select.width()&&this.wSelect.$select.width(e),this.$option.detach().show()}},e.support.placeholder="placeholder"in document.createElement("input"),e.fn.wSelect=function(n,s){function i(s){var i,o=e.data(s,"wSelect");return o||(i=jQuery.extend(!0,{},n),i.size=e(s).prop("size")||i.size,o=new t(s,i),e.data(s,"wSelect",o)),o}if("string"==typeof n){var o=[],a=this.each(function(){var i,t=e(this).data("wSelect");t&&(i=(s?"set":"get")+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase(),t[n]?t[n].apply(t,[s]):s?(t[i]&&t[i].apply(t,[s]),t.options[n]&&(t.options[n]=s)):t[i]?o.push(t[i].apply(t,[s])):t.options[n]?o.push(t.options[n]):o.push(null))});return 1===o.length?o[0]:o.length>0?o:a}return n=e.extend({},e.fn.wSelect.defaults,n),this.each(function(){i(this)})},e.fn.wSelect.defaults={theme:"classic",size:"4",highlight:!0}}(jQuery)